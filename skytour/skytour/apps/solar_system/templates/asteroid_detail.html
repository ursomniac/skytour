{% extends "base.html" %}
{% block styles %}
<style>
    td { border: 0; padding: 0 1em; vertical-align: top !important; }
    body { line-height: 1.2; }
    img.constrained { width: 100%; max-width: 500px; }
    td.hvcenter { vertical-align: middle!important; text-align: center!important; }


    h1 { margin-top: 8px; margin-bottom: 2px; }
    h2 { margin-top: 6px; margin-bottom: 4px; color: #fc9; }
	td.object_name { vertical-align: middle; padding-left: 20px; }
	td.description { vertical-align: middle!important; text-align: center; line-height: 1.75; color: #FFF;}
	td.description a { color: #ff0; }
    td.classification { padding-right: 75px; }
    td.ident { color: #ff0; }
    td.operations { text-align: right; padding: 3px 10px!important; }
    .hvcenter { vertical-align: middle!important; text-align: center!important; }
    table.main { background-color: #555; width: 100%!important; }
    table.main td { padding-left: 15px;  }
    td.description-text {
        font-size: 90%;
        line-height: 1.3;
        color: #ccc;
    }
    span.coordinates { 
        font-size: 150%; 
        padding: 3px 5px 15px 5px!important; 
        margin-bottom: 5px;
    }
    td.vt h4 { 
        margin-top: 4px; margin-bottom: 6px; 
        color: #f96;
    }
</style>
{% endblock styles %}
{% block title %}{{ object.name }}: Skytour{% endblock %}
{% block content %}
<br>
<table>
<!-- main -->
<tr>
    <td class="lite">
        <table class="main">
            <tr>
                <td width=69% class="object_name">
                    <h1>{{ object.name }}</h1>
                </td>
                <td width=20% class="description classification" rowspan=2>
                    {% if object.classification %}
                    {{ object.classification }} class asteroid
                    {% endif %}
                    {% if object.is_dwarf_planet %}
                    Dwarf Planet
                    {% endif %}
                    <br>currently in<br>
                    <a href="{% url 'constellation-detail' asteroid.observe.constellation.abbr|upper %}">{{ asteroid.observe.constellation.name }}</a>
                </td>
                <td  class="description operations" rowspan=2>
                    <a href="/admin/solar_system/asteroid/{{object.pk}}/change" target="_new"><button>Admin</button></a>
                    <br>
                    <a href="{% url 'sso-pdf' 'asteroid' object.slug %}" target="_new"><button>PDF View</button></a>
                    <br>
                    <button onclick="return realtimePopup('/asteroid/real-time/{{ object.slug }}')">
                        Real Time
                    </button>
                    <br>
                    <button onclick="return realtimePopup('/asteroid/real-time/{{ object.slug }}?utdt_base=cookie')">
                        Cookie
                    </button>
                </td>
            </tr>
            <tr>
                <td class="ident">
                    <h3>#{{ object.number }}</h3>
                    <b>Discovered:</b> {{ object.year_of_discovery }}
                </td>
            </tr>
        </table>

        <table width=100% class="lite info">
            <tr>
                <td colspan=3>
                    <h2>Information:</h2>
                </td>
                <td rowspan=4 width="30%" class="description-text">
                    <br>
                    {{ object.description|safe }}
                </td>
            </tr>
            <tr>
                <td colspan=2>
                    <span class="coordinates">
                        &alpha; (2000): {{ asteroid.apparent.equ.ra_str }}
                        &nbsp;&nbsp;&nbsp;&nbsp;
                        &delta; (2000): {{ asteroid.apparent.equ.dec_str }}
                    </span>
                </td>
            </tr>
            <tr>
                <td class='vt'>
                    {% with asteroid as obj %}
                    {% include 'inc_distance.html' %}
                    {% endwith %}
                </td>
                <td class='vt'>
                    {% with asteroid as obj %}
                    {% include 'inc_apparent.html' %}
                    {% endwith %}
                </td>
            </tr>
            <tr>
                <td>
                <button onclick="return realtimePopup('/solar_system/sso_map/asteroid/{{ object.pk }}/wide')">
                    Wide Area Map (10째)
                </button>
                </td>
                <td>
                    <button onclick="return realtimePopup('/solar_system/sso_map/asteroid/{{ object.pk }}/narrow')">
                    Narrow Area Map (4째)
                    </button>
                </td>
            </tr>
        </table>
    </td>
    <td width="500px" height="600px" style="position:relative;">
        {% if library_slideshow|length > 1 %}
        {% include "includes/library_slideshow.html" %}
        {% elif object.library_image %}
        <a href="{{ object.library_image.image.url }}"><img 
            src="{{ object.library_image.image.url }}" class="constrained"></a>
        {% else %}
        <p class='hvcenter'>No Image</p>
        {% endif %}
    </td>
</tr>
</table>

{% with instance=object admin_dir='solar_system/asteroid' %}
{% include 'includes/observation_section.html' %}
{% endwith %}

{% if object.image %}
<br>
    <img src="{{ object.image.url }}" class="constrained">
{% else %}
    No external image
{% endif %}

{% comment %}
<hr>
<h1>V1</h1>
<table>
    <tr>
        <td width="20%"> 
            <h1> {{ object.name }}</h1> 
            {% if in_cookie %}
            <h3> Currently in 
                <a href="{% url 'constellation-detail' asteroid.observe.constellation.abbr|upper %}">{{ asteroid.observe.constellation.name }}</a></h3>
            {% endif %}
            <table class="lite">
                <tr><td>Class:</td><td>{{ object.classification }}</td></tr>
                <tr><td>Diameter:</td><td>{{ object.diameter }} km</td></tr>
                <tr><td>Discovered:</td><td>{{ object.year_of_discovery }}<br/><br/></td></tr>
                <tr><td></td><td></td></tr>
                <tr><td># Obs:</td><td>{{ object.number_of_observations }}</td></tr>
                <tr><td>Last Observed:</td><td> 
                    {% if object.last_observed %}{{ object.last_observed|date:"Y-m-d H:i"}}
                    {% else %}(not yet){% endif %}
                </td></tr>
                <tr><td>
                    <a href="/admin/solar_system/asteroid/{{object.pk}}/change" target="_new"><button>Admin</button></a>
                    <a href="{% url 'sso-pdf' 'asteroid' object.slug %}" target="_new"><button>PDF View</button></a>
                    <br>
                    <button onclick="return realtimePopup('/asteroid/real-time/{{ object.slug }}')")>
                        Real Time
                    </button>
                    <button onclick="return realtimePopup('/asteroid/real-time/{{ object.slug }}?utdt_base=cookie')")>
                        Cookie
                    </button>
                </td></tr>
            </table>
        </td>
        <td width="25%" class="hvcenter">
            {% if object.image %}
            <img src="{{ object.image.url }}" class="constrained">
            {% else %}
            No external image
            {% endif %}
        </td>
        <td width="20%">
            <p>{{ object.description|safe }}</p>
        </td>
        {% if library_slideshow|length > 1 %}
        <td width="500px" height="600px" style="position:relative;">
        {% include "includes/library_slideshow.html" %}
        </td>
        {% elif object.library_image %}
        <td width="35%">
            <a href="{{ object.library_image.image.url }}"><img 
                src="{{ object.library_image.image.url }}" class="constrained"></a>
        </td>
        {% else %}
        <td width="35%" class="hvcenter">
            <p>No Image</p>
        </td>
        {% endif %}
    </tr>
</table>

<table>
    <thead>
    <tr>
        <th>Location</th>
        <th>Observe</th>
        <th>Maps</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td width="25%" style="vertical-align:top;">
            {% with asteroid as obj %}
            {% include 'inc_coordinates.html' %}
            {% endwith %}
        </td>
        <td width="25%" style="vertical-align:top;">
            {% with asteroid as obj %}
            {% include 'inc_apparent.html' %}
            {% endwith %}
        </td>

        <td width="25%" style="vertical-align:top;">
            <button onclick="return realtimePopup('/solar_system/sso_map/asteroid/{{ object.pk }}/wide')">
                Wide Area Map (10째)
            </button>
            <br>
            <button onclick="return realtimePopup('/solar_system/sso_map/asteroid/{{ object.pk }}/narrow')">
                Narrow Area Map (4째)
            </button>
        </td>
    </tr>
</table>
<br><br>
{% endcomment %}

{% include 'includes/performance_time.html' %}

{% endblock content %}
{% block extra-js %}
{% include 'includes/realtime_script.html' %}
{% endblock extra-js %}